# Phase 04: User Configuration - Plan 01

## Objective
Add settings UI to let users select target language. Persist preferences across sessions.

## Context
- Roadmap: `@../../ROADMAP.md` (Phase 04)
- Brief: `@../../BRIEF.md`
- Phase 03 Summary: `@../03-integration/03-01-SUMMARY.md`

## Tasks

### Task 1: Settings Panel UI - Language Dropdown
- **Type:** Feature
- **Files:**
  - Update `main.py`
- **Action:**
  1. Expand settings button behavior (from Phase 02 placeholder)
  2. Create language dropdown with options:
     - English (source)
     - Spanish, French, German, Portuguese, Italian, Japanese, Chinese (simplified)
     - Add more as needed
  3. Dropdown initially hidden
  4. When settings button clicked, show dropdown
  5. Selected language displayed in dropdown
- **Verify:**
  - Settings button shows dropdown
  - All language options visible and selectable
  - Selection changes are immediately visible
  - Dropdown can be collapsed
- **Done:** Language dropdown functional in UI

### Task 2: Config File & Persistence
- **Type:** Feature
- **Files:**
  - Create `config.json` (in app root)
  - Update `main.py`
- **Action:**
  1. Create `config.json` with default settings:
     ```json
     {
       "target_language": "Spanish",
       "source_language": "English",
       "hotkey": "F8"
     }
     ```
  2. On app startup, load config from file
  3. When user selects language, save to config.json immediately
  4. On app close, config persists (so next launch remembers selection)
- **Verify:**
  - App starts with saved language from previous session
  - Changing language updates config.json
  - config.json is valid JSON (can be manually edited)
- **Done:** Config file created and loading works

### Task 3: Integration with Translation Logic
- **Type:** Feature
- **Files:**
  - Update `main.py`
- **Action:**
  1. Modify transcription/translation flow to use selected language from config
  2. Instead of hardcoded "Spanish", use `config['target_language']`
  3. Pass language to `GoogleTranslator` in `deep_translator`
  4. Test with different languages
- **Verify:**
  - Select French in settings → text translates to French
  - Select German in settings → text translates to German
  - Translation works for multiple languages
- **Done:** Translation respects user language selection

### Task 4: UI Polish & Feedback
- **Type:** Feature
- **Files:**
  - Update `main.py`
- **Action:**
  1. Add visual feedback when language is changed (e.g., brief status message)
  2. Show current language in main UI (small text below status)
  3. Disable language dropdown during recording/processing (prevent mid-flight changes)
  4. Add tooltip or help text: "Select target language for translation"
- **Verify:**
  - Current language visible in UI
  - Language dropdown disabled during recording
  - Change feedback visible
- **Done:** Settings UI is polished and intuitive

## Verification (Overall)
- All 4 tasks complete
- Language dropdown functional and persisted
- config.json created and auto-saved
- Translation respects language selection
- UI shows current language
- Settings don't interfere with recording/processing

## Success Criteria
✅ Settings panel with language dropdown
✅ Multiple languages supported (at least 6)
✅ User selection saved to config.json
✅ Config loaded on app startup
✅ Translation uses selected language
✅ Current language displayed in UI
✅ Language dropdown disabled during recording/processing
✅ No crashes on language change

## Output
Creates `04-01-SUMMARY.md` when complete with:
- List of supported languages
- Screenshot of settings panel
- config.json structure and example
- Test results: language changes work across app restarts
- Notes on language support limitations (if any)
