# Phase 05: Packaging & Distribution - Plan 01

## Objective
Create standalone `.exe` with bundled dependencies. Verify it runs on clean Windows machine.

## Context
- Roadmap: `@../../ROADMAP.md` (Phase 05)
- Brief: `@../../BRIEF.md`
- Phase 04 Summary: `@../04-configuration/04-01-SUMMARY.md`

## Tasks

### Task 1: Icon & Branding
- **Type:** Asset
- **Files:**
  - Create `icon.ico` (in app root)
- **Action:**
  1. Create simple icon (32x32 or 64x64 PNG first)
  2. Convert to `.ico` format using online tool or Python (PIL)
  3. Place in app root as `icon.ico`
  4. Test: Icon visible in Windows file explorer
- **Verify:**
  - `icon.ico` exists and is valid
  - File explorer shows icon (not generic Python icon)
- **Done:** Icon created and placed

### Task 2: Prepare for Flet Pack
- **Type:** Setup
- **Files:**
  - Verify `main.py` (entry point)
  - Verify `requirements.txt`
  - Update `main.py` metadata
- **Action:**
  1. Ensure `main.py` is entry point (not `ui_skeleton.py` or `console_test.py`)
  2. Add shebang: `#!/usr/bin/env python3` at top
  3. Verify all imports work: `python main.py`
  4. Check requirements.txt has all needed libraries (flet, SpeechRecognition, deep-translator, pyaudio, keyboard, pyautogui)
  5. Document: "To build .exe: `flet pack main.py --icon icon.ico`"
- **Verify:**
  - main.py runs in dev environment
  - requirements.txt complete
  - No import errors
- **Done:** main.py and requirements.txt ready for packaging

### Task 3: Build Standalone .exe
- **Type:** Feature
- **Files:**
  - Output: `dist/CloudWhisperFlow.exe` (or similar)
- **Action:**
  1. Install flet if not present: `pip install flet`
  2. Run: `flet pack main.py --icon icon.ico --name CloudWhisperFlow`
  3. This creates `dist/CloudWhisperFlow.exe`
  4. Build may take 2-5 minutes (compiling with PyInstaller under the hood)
  5. Verify `.exe` exists and has reasonable size (50-100MB range)
- **Verify:**
  - Build completes without errors
  - `.exe` file exists in `dist/`
  - File size reasonable (not 0 bytes)
- **Done:** .exe successfully built

### Task 4: Testing on Clean Windows & Documentation
- **Type:** Verification
- **Files:**
  - Create `RELEASE.md` with instructions
  - Output: Tested `.exe`
- **Action:**
  1. Test on different Windows machine (or VM):
     - Copy `.exe` to new folder
     - Run (no Python installed)
     - Test F8 hotkey (record, transcribe, translate, inject)
     - Test language selection
     - Close app
  2. Document any issues and solutions
  3. Create `RELEASE.md`:
     - Installation: "Just run the .exe"
     - First time: "Allow microphone access"
     - Features: "Press F8 to record"
     - Troubleshooting: Common issues and fixes
  4. Create GitHub release with .exe and README
- **Verify:**
  - .exe runs on clean Windows (no errors)
  - All features work identically to dev version
  - Microphone permission dialog appears (expected)
  - RELEASE.md is clear and helpful
- **Done:** .exe tested and documented

## Verification (Overall)
- All 4 tasks complete
- icon.ico created
- main.py verified and clean
- .exe successfully built via `flet pack`
- .exe tested on clean Windows machine
- All features functional
- RELEASE.md documented

## Success Criteria
✅ icon.ico created and valid
✅ main.py is clean entry point
✅ requirements.txt complete
✅ `flet pack` command works
✅ .exe builds successfully
✅ .exe runs on Windows 10/11 (no Python required)
✅ F8 hotkey works in standalone app
✅ Transcription, translation, text injection work
✅ Language settings persisted
✅ RELEASE.md clear and complete

## Output
Creates `05-01-SUMMARY.md` when complete with:
- Build command: `flet pack main.py --icon icon.ico`
- .exe file location and size
- Test results on clean Windows
- Any issues encountered and solutions
- Installation instructions for end users
- Troubleshooting guide

---

## Post-Release (v1.1 Planning)
After v1.0 ships, plan v1.1 with enhancements:
- Custom hotkey binding (UI to configure)
- OpenAI Whisper API fallback
- Clipboard paste option
- System tray icon
- Dark/light theme
- These logged in ISSUES.md during execution
